"use strict";(self.webpackChunkstarcoin_cookbook=self.webpackChunkstarcoin_cookbook||[]).push([[3790],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return b}});var a=n(7294);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,c=e.mdxType,o=e.originalType,d=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),f=s(n),b=c,p=f["".concat(d,".").concat(b)]||f[b]||l[b]||o;return n?a.createElement(p,r(r({ref:t},u),{},{components:n})):a.createElement(p,r({ref:t},u))}));function b(e,t){var n=arguments,c=t&&t.mdxType;if("string"==typeof e||c){var o=n.length,r=new Array(o);r[0]=f;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:c,r[1]=i;for(var s=2;s<o;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},7255:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return d},default:function(){return b},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l}});var a=n(7462),c=n(3366),o=(n(7294),n(3905)),r=["components"],i={sidebar_position:4},d="Rotate authentication key",s={unversionedId:"getting-started/accounts/rotate-authentication-key",id:"getting-started/accounts/rotate-authentication-key",title:"Rotate authentication key",description:"Prerequisite",source:"@site/docs/02-getting-started/03-accounts/4.rotate-authentication-key.md",sourceDirName:"02-getting-started/03-accounts",slug:"/getting-started/accounts/rotate-authentication-key",permalink:"/starcoin-cookbook/docs/getting-started/accounts/rotate-authentication-key",editUrl:"https://github.com/starcoinorg/starcoin-cookbook/edit/main/docs/02-getting-started/03-accounts/4.rotate-authentication-key.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Multisig accounts and multisig transactions",permalink:"/starcoin-cookbook/docs/getting-started/accounts/multisig-account"},next:{title:"Use StarMask or Other wallets",permalink:"/starcoin-cookbook/docs/getting-started/accounts/use-starmask"}},u={},l=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Get get the corresponding from accont A",id:"get-get-the-corresponding-from-accont-a",level:2},{value:"Replace account B with the new authentication key",id:"replace-account-b-with-the-new-authentication-key",level:2}],f={toc:l};function b(e){var t=e.components,n=(0,c.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"rotate-authentication-key"},"Rotate authentication key"),(0,o.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,o.kt)("p",null,"Let's say you've run up a starcoin dev node locally and get a default account."),(0,o.kt)("p",null,"And ",(0,o.kt)("inlineCode",{parentName:"p"},"authentication key")," id generated from ",(0,o.kt)("inlineCode",{parentName:"p"},"private key")," ,so you need to get the corresponding ",(0,o.kt)("inlineCode",{parentName:"p"},"authentication key")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"private key")),(0,o.kt)("h2",{id:"get-get-the-corresponding-from-accont-a"},"Get get the corresponding from accont A"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'starcoin% account show 0x1590e52ca72c5acbf4ec931b5938ed77\n{\n  "ok": {\n    "account": {\n      "address": "0x1590e52ca72c5acbf4ec931b5938ed77",\n      "is_default": false,\n      "is_readonly": false,\n      "public_key": "0x933f027809d9280f192542507a67fafc7d0efa73d1db62302a197dc65eccf1fd",\n      "receipt_identifier": "stc1pzkgw2t9893dvha8vjvd4jw8dwum9tul2"\n    },\n    "auth_key": "0xda3c8d088d4d339c5708f2ee0255dc931590e52ca72c5acbf4ec931b5938ed77",\n    "balances": {},\n    "sequence_number": null\n  }\n}\nstarcoin% account export 0x1590e52ca72c5acbf4ec931b5938ed77 -p my-pass\n{\n  "ok": {\n    "account": "0x1590e52ca72c5acbf4ec931b5938ed77",\n    "private_key": "0xf657971795bfe49026d224ece814ecc31169f93ca709a7b6fc962aa6b3bd5a83"\n  }\n}\n')),(0,o.kt)("h2",{id:"replace-account-b-with-the-new-authentication-key"},"Replace account B with the new authentication key"),(0,o.kt)("p",null,"we assume that the new ",(0,o.kt)("inlineCode",{parentName:"p"},"authentication key")," is the ",(0,o.kt)("inlineCode",{parentName:"p"},"0xda3c8d088d4d339c5708f2ee0255dc931590e52ca72c5acbf4ec931b5938ed77"),"\nand ",(0,o.kt)("inlineCode",{parentName:"p"},"the private key")," is the ",(0,o.kt)("inlineCode",{parentName:"p"},"0xf657971795bfe49026d224ece814ecc31169f93ca709a7b6fc962aa6b3bd5a83"),"\nand the address for account B is the ",(0,o.kt)("inlineCode",{parentName:"p"},"0xb91e6eb2a4a5b92fd08a016ad72fc8c5")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'starcoin% account show 0xb91e6eb2a4a5b92fd08a016ad72fc8c5\n{\n  "ok": {\n    "account": {\n      "address": "0xb91e6eb2a4a5b92fd08a016ad72fc8c5",\n      "is_default": false,\n      "is_readonly": false,\n      "public_key": "0xc507993eb4e2b88b4b377009ceeda99565193ca454cde2d790b75d62af43b32f",\n      "receipt_identifier": "stc1phy0xav4y5kujl5y2q94dwt7gc527m4lk"\n    },\n    "auth_key": "0xd568f4733aac09e88b21e1b1758acdfab91e6eb2a4a5b92fd08a016ad72fc8c5",\n    "balances": {},\n    "sequence_number": null\n  }\n}\n')),(0,o.kt)("p",null,"Then,unlock the account B and send a transaction to rotate the authentication key"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'starcoin% account unlock -p my-pass 0xb91e6eb2a4a5b92fd08a016ad72fc8c5\n{\n  "ok": {\n    "address": "0xb91e6eb2a4a5b92fd08a016ad72fc8c5",\n    "is_default": false,\n    "is_readonly": false,\n    "public_key": "0xc507993eb4e2b88b4b377009ceeda99565193ca454cde2d790b75d62af43b32f",\n    "receipt_identifier": "stc1phy0xav4y5kujl5y2q94dwt7gc527m4lk"\n  }\n}\nstarcoin% account execute-function -s 0xb91e6eb2a4a5b92fd08a016ad72fc8c5 --function 0x1::Account::rotate_authentication_key --arg x"da3c8d088d4d339c5708f2ee0255dc931590e52ca72c5acbf4ec931b5938ed77" -b\n')),(0,o.kt)("p",null,"now,we change the authentication key and private key of the account B\nif you send a transaction now "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"starcoin% account transfer -s 0xb91e6eb2a4a5b92fd08a016ad72fc8c5 -r 0x1590e52ca72c5acbf4ec931b5938ed77 -v 10000 -b\n")),(0,o.kt)("p",null,"you will get the result ",(0,o.kt)("inlineCode",{parentName:"p"},"INVALID_AUTH_KEY")),(0,o.kt)("p",null,"so you need to reimport the account B"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'starcoin% account remove 0xb91e6eb2a4a5b92fd08a016ad72fc8c5 -p my-pass\n{\n  "ok": {\n    "address": "0xb91e6eb2a4a5b92fd08a016ad72fc8c5",\n    "is_default": false,\n    "is_readonly": false,\n    "public_key": "0xc507993eb4e2b88b4b377009ceeda99565193ca454cde2d790b75d62af43b32f",\n    "receipt_identifier": "stc1phy0xav4y5kujl5y2q94dwt7gc527m4lk"\n  }\n}\nstarcoin% account import -i 0xf657971795bfe49026d224ece814ecc31169f93ca709a7b6fc962aa6b3bd5a83 -p my-pass 0xb91e6eb2a4a5b92fd08a016ad72fc8c5\n')),(0,o.kt)("p",null,"now I can show the accout B infomation and and use the new ",(0,o.kt)("inlineCode",{parentName:"p"},"authentication key")," to send transaction"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'starcoin% account show 0xb91e6eb2a4a5b92fd08a016ad72fc8c5\n{\n  "ok": {\n    "account": {\n      "address": "0xb91e6eb2a4a5b92fd08a016ad72fc8c5",\n      "is_default": false,\n      "is_readonly": false,\n      "public_key": "0x933f027809d9280f192542507a67fafc7d0efa73d1db62302a197dc65eccf1fd",\n      "receipt_identifier": "stc1phy0xav4y5kujl5y2q94dwt7gc527m4lk"\n    },\n    "auth_key": "0xda3c8d088d4d339c5708f2ee0255dc931590e52ca72c5acbf4ec931b5938ed77",\n    "balances": {\n      "0x00000000000000000000000000000001::STC::STC": 99999941419\n    },\n    "sequence_number": 1\n  }\n}\nstarcoin% account unlock -p my-pass 0xb91e6eb2a4a5b92fd08a016ad72fc8c5\n{\n  "ok": {\n    "address": "0xb91e6eb2a4a5b92fd08a016ad72fc8c5",\n    "is_default": false,\n    "is_readonly": false,\n    "public_key": "0x933f027809d9280f192542507a67fafc7d0efa73d1db62302a197dc65eccf1fd",\n    "receipt_identifier": "stc1phy0xav4y5kujl5y2q94dwt7gc527m4lk"\n  }\n}\nstarcoin% account transfer -s 0xb91e6eb2a4a5b92fd08a016ad72fc8c5 -r 0x1590e52ca72c5acbf4ec931b5938ed77 -v 10000 -b\n')),(0,o.kt)("p",null,"Finally,we change the authenticaton key of accout B wihtout account address change"),(0,o.kt)("h1",{id:"change-an-account-to-a-multi-sign-account-by-rotate-the-authentication-key"},"change an account to a multi-sign account by rotate the authentication key."))}b.isMDXComponent=!0}}]);